# 智慧藥品分配器系統

這是一個基於 ESP32 的智慧藥品分配器系統，具備網頁介面、RTC 實時時鐘、LCD 顯示器、WiFi 設定管理、事件排程與藥品分配功能。使用者可透過網頁設定每日或每 N 天的藥品分配時間與數量，系統將自動執行並提示使用者取藥。

## 📦 功能簡介

- ✅ WiFi 自動連線與設定模式（使用 WiFiManager）
- ✅ RTC 實時時鐘同步（支援 NTP）
- ✅ LCD 顯示目前時間與 IP 位址
- ✅ 網頁介面可新增、刪除事件
- ✅ 支援每日、每週特定日、每 N 天重複事件
- ✅ 自動分配藥品並提示使用者取藥
- ✅ 支援多個儲存槽（Storage ID）


## 👤 使用者操作說明

1. **首次啟動或按下 RESET 鍵（GPIO0）**
   - 進入 WiFi 設定模式，請連接 `MedicineDispenserAP` 並設定 WiFi。

2. **連線成功後**
   - LCD 顯示 IP 位址，使用者可透過瀏覽器輸入該 IP 進入主頁。

3. **主頁功能**
   - 顯示目前時間與所有事件列表。
   - 點選「Add Event」新增事件。

4. **新增事件頁面**
   - 選擇重複方式（每日、每週、每 N 天）
   - 設定時間、儲存槽 ID、分配數量
   - 提交後事件將儲存並自動執行

5. **事件執行**
   - 到達指定時間後，系統會自動分配藥品並提示使用者取藥（可接 LED 或蜂鳴器）


## 🛠️ 開發者注意事項

若您是開發者，以下是您可能需要編輯或擴充的部分：

### 1. 藥品分配機構控制
請在 `outputMedicine()` 函式中加入控制馬達或伺服器的程式碼，以完成藥品分配功能。

### 2. 使用者提示與感應
請在 `notificationOn()` 和 `notificationOff()` 中加入 LED 或蜂鳴器控制程式碼。
可擴充感應器偵測使用者是否已取藥。

### 3. 儲存資料持久化
目前事件資料儲存在記憶體中，若需斷電保存，請整合 SPIFFS 或 EEPROM。

### 4. 安全性與驗證
若系統部署於公開網路，建議加入密碼保護或 HTTPS 支援。


## 🧰 系統需求與硬體連接

### 硬體需求
- ESP32 開發板
- RTC 模組（如 DS1307）
- I2C LCD 顯示器（地址 0x27）
- WiFi（內建於 ESP32）
- 藥品分配機構（馬達、伺服器等）
- LED / 蜂鳴器（提示用）
- 感應器（如紅外線、光感等）

### 接腳設定
- I2C：SDA = GPIO21, SCL = GPIO22
- RESET 鍵：GPIO0（可自訂）


## 📄 檔案結構說明

- `setup()`：初始化 WiFi、LCD、RTC、Web Server
- `loop()`：處理網頁請求與更新 LCD 顯示
- `checkEventTask()`：背景執行事件檢查與分配
- `handleRoot()` / `handleAddEvent()`：網頁主頁與新增事件頁面
- `handleSubmit()`：接收事件資料並儲存
- `handleGetEvents()` / `handleDeleteEvent()`：事件查詢與刪除


## 📬 聯絡與貢獻

如有建議、錯誤回報或想要貢獻，歡迎提交 Pull Request 或聯絡開發者。
